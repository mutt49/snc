<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:define name="content">
		<rich:popupPanel id="addLineItem" autosized="true">
			<f:facet name="Header">
				<h:outputText value="Add Line Item" />
			</f:facet>
			<a onclick="#{rich:component('addLineItem')}.hide()" href="#">Hide
				ModalPanel</a>
			<rich:panel>
				<h:form>
					<h:panelGrid id="addLineItemPanel" columns="2">
						<h:outputText value="Serial No" />
						<h:inputText value="#{InvoiceHeaderBean.invLineItem.serialNo}" /> 


						<h:outputText value="Part Name" />
						<!--    <h:inputText value="#{InvoiceHeaderBean.partVo.partName}" /> -->
						<h:panelGroup>
							<rich:autocomplete mode="cachedAjax" minChars="2" required="true" id="pName"
								autocompleteMethod="#{InvoiceHeaderBean.partNameAutoComplete}"
								value="#{InvoiceHeaderBean.partVo.partName}">
								<a4j:ajax event="change" listener="#{InvoiceHeaderBean.getGradesForPart}"
									render="selectGrade" />
							</rich:autocomplete>
						</h:panelGroup>
	
						<h:outputText value="Grade" />
						<h:selectOneMenu value="#{InvoiceHeaderBean.invLineItem.gradeId}" id="selectGrade">
							<f:selectItems id="LinePartgradeId" value="#{InvoiceHeaderBean.selectedPartGradeMapping}" var="GradeList" itemLabel="#{GradeList.gradeName}" 
							itemValue="#{GradeList.gradeId}"></f:selectItems>
						</h:selectOneMenu>

						<h:outputText value="Package Desc" />
						<h:inputText value="#{InvoiceHeaderBean.invLineItem.pkgDesc}" />

						<h:outputText value="No of Packages" />
						<h:inputText value="#{InvoiceHeaderBean.invLineItem.noOfPkgs}" />

						<h:outputText value="Quantity Nos." />
						<h:inputText value="#{InvoiceHeaderBean.invLineItem.quantityNo}" />

						<h:outputText value="Quantity Kgs." />
						<h:inputText value="#{InvoiceHeaderBean.invLineItem.quantityKgs}" />

						<h:outputText value="Unit" />
						<h:panelGroup>
							<!-- <h:inputText value="#{InvoiceHeaderBean.invLineItem.unit}"
								id="unit" required="true" requiredMessage="    Required" /> -->

							<h:selectOneRadio value="#{InvoiceHeaderBean.invLineItem.unit}"
								id="unit" required="true" requiredMessage="    Required">
								<f:selectItem itemValue="kg" itemLabel="KG" id="kg"/>
								<f:selectItem itemValue="no" itemLabel="NO." id="no"/>
								<f:selectItem itemValue="kg" itemLabel="SET" id="set"/>
							</h:selectOneRadio>
							<h:message for="unit" style="color:red;" />
						</h:panelGroup>

						<h:outputText value="Rate" />
						<h:panelGroup>
							<h:inputText id="liRate"
								value="#{InvoiceHeaderBean.invLineItem.rate}" required="true"
								requiredMessage="    Required" />
							<h:message for="liRate" style="color:red;" />
						</h:panelGroup>

						<h:outputText value="Amount" />
						<h:inputText id="liAmount"
							value="#{InvoiceHeaderBean.invLineItem.amount}" disabled="true" />

						<h:commandButton value="Save" styleClass="searchButton"
							action="#{InvoiceHeaderBean.addLineItem}">
						</h:commandButton>

					</h:panelGrid>
				</h:form>
			</rich:panel>
		</rich:popupPanel>

		<rich:popupPanel id="addTaxes" autosized="true">
			<f:facet name="Header">
				<h:outputText value="Add Taxes" />
			</f:facet>
			<a onclick="#{rich:component('addTaxes')}.hide()" href="#">Hide
				ModalPanel</a>
			<rich:panel>
				<h:form>
					<h:panelGrid id="addTaxesPanel" columns="2">
						<h:outputText value="B.E.D. Rate" />
						<h:panelGroup>
							<h:inputText
								value="#{InvoiceHeaderBean.selectedInvHdrVo.bedRate}"
								id="bedRate" required="true" requiredMessage="    Required" />
							<h:message for="bedRate" style="color:red;" />
						</h:panelGroup>

						<h:outputText value="E.D. Cess Rate" />
						<h:panelGroup>
							<h:inputText
								value="#{InvoiceHeaderBean.selectedInvHdrVo.edCessRate}"
								id="edRate" required="true" requiredMessage="    Required" />
							<h:message for="edRate" style="color:red;" />
						</h:panelGroup>

						<h:outputText value="S.H.S Cess" />
						<h:panelGroup>
							<h:inputText
								value="#{InvoiceHeaderBean.selectedInvHdrVo.shsCess}"
								id="shsCess" required="true" requiredMessage="    Required" />
							<h:message for="shsCess" style="color:red;" />
						</h:panelGroup>

						<h:outputText value="VAT/CST" />
						<h:panelGroup>
							<h:inputText id="vat"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.vatOrCst}"
								required="true" requiredMessage="    Required" />
							<h:message for="vat" style="color:red;" />
						</h:panelGroup>

						<h:commandButton value="Save" styleClass="searchButton"
							action="#{InvoiceHeaderBean.addTaxes}">
						</h:commandButton>

					</h:panelGrid>
				</h:form>
			</rich:panel>
		</rich:popupPanel>

		<f:view>
			<h:form>
				<rich:toolbar styleClass="toolbar">
					<rich:dropDownMenu id="dropDownMenu" label="Masters">
						<rich:menuItem action="CcmSearch.jsf"
							label="Chemical Composition Masters" id="ChemMaster"
							styleClass="toolbar"></rich:menuItem>
						<rich:menuItem action="MpmSearch.jsf"
							label="Physical Properties Masters" id="PhyMaster"
							styleClass="toolbar"></rich:menuItem>
						<rich:menuItem action="PartMasterSearch.jsf" label="Part Masters"
							id="partMaster" styleClass="toolbar"></rich:menuItem>
						<rich:menuItem action="GradeMasterSearch.jsf"
							label="Grade Masters" id="GradeMaster" styleClass="toolbar"></rich:menuItem>
						<rich:menuItem action="CustomerSearch.jsf"
							label="Customer Masters" id="CustMaster" styleClass="toolbar"></rich:menuItem>
					</rich:dropDownMenu>
					<h:commandLink value="Invoices" action="InvoiceHeaderSearch.jsf"
						styleClass="toolbar" />
					<h:commandLink value="Test Certificates"
						action="TestCertificateSearch.jsf" styleClass="toolbar" />
					<h:commandLink value="Purchase Orders"
						action="PurchaseOrderSearch.jsf" styleClass="toolbar" />
				</rich:toolbar>

				<h:outputText value="Invoice Header" styleClass="pageTitle" />

				<h:messages globalOnly="true" />

				<h:panelGrid columns="2">
					<ui:remove>
						<h:panelGroup>
							<h:outputText value="Invoice ID" />
							<h:inputText value="#{InvoiceHeaderBean.selectedInvHdrVo.invId}" />
						</h:panelGroup>
					</ui:remove>
					<h:panelGroup>
						<h:outputText value="Invoice Number" />
						<h:inputText value="#{InvoiceHeaderBean.selectedInvHdrVo.invNo}" />
					</h:panelGroup>
					<h:panelGroup>
						<h:outputText value="Invoice Date" />
						<rich:calendar id="invDate"
							value="#{InvoiceHeaderBean.selectedInvHdrVo.invDate}" />
					</h:panelGroup>
						<h:panelGroup>
						<h:outputText value="Print Invoice Number on PDF:" />
						<h:selectBooleanCheckbox value="#{InvoiceHeaderBean.printInvoiceNumberOnPDF}"></h:selectBooleanCheckbox>
						</h:panelGroup>
				</h:panelGrid>

				<h:panelGrid id="mainPanel" columns="2">
					<h:panelGroup id="leftPane">
						<h:panelGrid id="leftPanle1" columns="2">
							<h:outputText value="Code No./Central Excise" />
							<h:inputText id="CodeNo" value="#{InvoiceHeaderBean.exciseCode}" />
							<h:outputText value="Registration Certificate No." />
								<h:inputText id="RegCertNo"
								value="#{InvoiceHeaderBean.regCertNo}" />
							<h:outputText value="P.L.A. NO." />
							<h:inputText id="PLANo" value="#{InvoiceHeaderBean.plaNo}" />
							<h:outputText value="Address Of Range" />
								<h:inputTextarea id="rangeAddress"
								value="#{InvoiceHeaderBean.rangeAddress}" rows="4" cols="30" />
							<h:outputText value="Division" />
								<h:inputTextarea id="division"
									value="#{InvoiceHeaderBean.division}" rows="4" cols="30"
									required="true" requiredMessage="    Required" />
								<h:message for="division" style="color:red;" />
						</h:panelGrid>
						<h:panelGrid id="leftPanle2" columns="2">
							<h:outputText value="Your P.O. No." />
							<h:inputText id="poNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.purchaseOrderId}" />
							<h:outputText value="Date" />
							<rich:calendar id="poDate"
										value="#{InvoiceHeaderBean.selectedInvHdrVo.purchaseOrderDate}" />
						</h:panelGrid>
						<h:panelGrid id="leftPanle4" columns="2">
							<h:outputText value="Mode Of Transport" />
							<h:inputText id="mot"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.modeOfTransport}" />
							<h:outputText value="Vehicle No." />
							<h:inputText id="vNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.vehicleNo}" />
							<h:outputText value="T.C. No." />
							<h:inputText id="tcNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.tcNo}" />
							<h:outputText value="I.R. No." />
							<h:inputText id="irNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.irNo}" />
						</h:panelGrid>
					</h:panelGroup>

					<h:panelGroup id="rightPane">
						<h:panelGrid id="RightPanel1" columns="2">
							<h:outputText value="Name of Excisable Commodity" />
							<h:inputText id="nEc"
									value="#{InvoiceHeaderBean.nameofexcisable}" />
							<h:outputText value="Tariff Handling No." />
							<h:inputText id="tHNo" value="#{InvoiceHeaderBean.tariffHeading}" />
							<h:outputText value="Exemption Notif. No." />
							<h:inputText id="eNNo" value="#{InvoiceHeaderBean.excemption}" />
							<h:outputText value="Service Tax" />
							<h:inputText id="rDuty" value="#{InvoiceHeaderBean.serviceTax}" />
							<h:outputText value="Income Tax P.A.N./G.I.R. No. " />
							<h:inputText id="panGirNo"
									value="#{InvoiceHeaderBean.incomeTaxPan}" />
						</h:panelGrid>

						<h:panelGrid id="RightPanel2" columns="2">
							<h:outputText value="Vendor/Supplier Code No." />
								<rich:autocomplete mode="cachedAjax" minChars="2"
									valueChangeListener="#{InvoiceHeaderBean.getCustomerDataUsingVendorCode}"
									autocompleteMethod="#{InvoiceHeaderBean.vendorCodeAutoComplete}"
									value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.vendor_code}">
									<a4j:ajax event="change"
										render="cAddress,dTo,dAddress,ecCode,octroiNo,cstNo,bstNo,cName" />
								</rich:autocomplete>
							<h:outputText value="Customer Name" />


							<!--		
							<h:inputText id="cName"
								valueChangeListener="#{InvoiceHeaderBean.getCustomerData}"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.customer_name}">
								<a4j:ajax event="change"
									render="cAddress,dTo,dAddress,ecCode,octroiNo,cstNo,bstNo,vendorCode" />
							</h:inputText>  -->
								<rich:autocomplete mode="cachedAjax" minChars="2" id="cName"
									valueChangeListener="#{InvoiceHeaderBean.getCustomerData}"
									autocompleteMethod="#{InvoiceHeaderBean.customerNameAutoComplete}"
									value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.customer_name}">
									<a4j:ajax event="change" 
										render="cAddress,dTo,dAddress,ecCode,octroiNo,cstNo,bstNo,vendorCode" />
								</rich:autocomplete>

							<h:outputText value="Customer Address" />
							<h:inputTextarea id="cAddress"
									styleClass="searchEntryPreformatted"
									value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.customer_address}" />
						</h:panelGrid>

						<h:panelGrid id="RightPanel3" columns="2">
							<h:outputText value="Delivery To" />
							<h:inputText id="dTo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.deliveryTo}" />
							<h:outputText value="Delivery Address" />
							<h:inputTextarea id="dAddress"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.deliveryAddress}" />
							<h:outputText value="E.C.Code No." />
							<h:inputText id="ecCode"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.ecc_no}" />
							<h:outputText value="Octroi No." />
							<h:inputText id="octroiNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.octroi_no}" />
							<h:outputText value="C.S.T. No." />
							<h:inputText id="cstNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.cst_no}" />
							<h:outputText value="B.S.T. No." />
							<h:inputText id="bstNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.custDetails.bst_no}" />
						</h:panelGrid>
						<h:panelGrid columns="2">
							<h:outputText value="L.R. No." />
							<h:inputText id="lrNo"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.lrNo}" />
							<h:outputText value="Terms of Payment" />
							<h:inputText id="payTerms"
									value="#{InvoiceHeaderBean.selectedInvHdrVo.paymentTerms}" />
						</h:panelGrid>
					</h:panelGroup>

					<h:panelGrid columns="2">
						<h:outputText value="Total Amount" />
						<h:inputText id="totAmount" disabled="true"
							value="#{InvoiceHeaderBean.selectedInvHdrVo.liAmountTotal}" />
						<h:outputText value="Packing and Forwarding Charges" />
						<h:inputText id="pkgFrwd"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.pkgFrwdChg}" />
						<h:outputText value="Net Total" />
						<h:inputText id="netTotal" disabled="true"
							value="#{InvoiceHeaderBean.selectedInvHdrVo.netTotalAmount}" />
						<h:outputText value="Freight and Insurance" />
						<h:inputText id="frtIns"
								value="#{InvoiceHeaderBean.selectedInvHdrVo.freightInsurance}" />
						<h:outputText value="Grand Total" />
						<h:inputText id="grndTotal" disabled="true"
							value="#{InvoiceHeaderBean.selectedInvHdrVo.grandTotal}" />
					</h:panelGrid>

					<h:panelGrid columns="2">
						<h:panelGroup>
							<h:outputText value="Date &amp; Time of Issue of Invoice" />
								<rich:calendar id="invIssueDate" datePattern="dd/M/yyyy HH:mm"
									value="#{InvoiceHeaderBean.selectedInvHdrVo.invIssueDate}" />
							</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="Date &amp; Time of Removal" />
								<rich:calendar id="remDate" datePattern="dd/M/yyyy HH:mm"
									value="#{InvoiceHeaderBean.selectedInvHdrVo.removalDate}" />
						</h:panelGroup>
					</h:panelGrid>

					<!-- <h:panelGrid columns="2">
							<h:outputText value="L.R. No." />
							<h:inputText id="tcNo" value="#{InvoiceHeaderBean.selectedInvHdrVo.lrNo}" />
							<h:outputText value="Mode of Payment" />
							<h:inputText id="irNo" value="InvoiceHeaderBean.selectedInvHdrVo.paymentTerms" />
						</h:panelGrid> -->

				</h:panelGrid>

				<h:panelGrid columns="2">
					<h:commandButton value="Add" styleClass="searchButton"
						action="#{InvoiceHeaderBean.add}"
						rendered="#{!InvoiceHeaderBean.editFlag}" />
					<h:commandButton value="Edit" styleClass="searchButton"
						action="#{InvoiceHeaderBean.add}"
						rendered="#{InvoiceHeaderBean.editFlag}" />
					<a4j:commandButton value="Add Line Item" styleClass="searchButton"
						id="addLI" oncomplete="#{rich:component('addLineItem')}.show()}"
						rendered="#{InvoiceHeaderBean.headerSaved}" render="totAmount"
						onclick="if (! confirm('Check whether you have added taxes?') ) { return false;}; return true; ">
						<rich:componentControl target="addLineItem" operation="show"
							event="click" />
					</a4j:commandButton>
					<a4j:commandButton value="Add Tax" styleClass="searchButton"
						id="addTx" oncomplete="#{rich:component('addTaxes')}.show()}"
						rendered="#{InvoiceHeaderBean.headerSaved}">
						<rich:componentControl target="addTaxes" operation="show"
							event="click" />
					</a4j:commandButton>
					<h:commandButton value="Print" styleClass="searchButton"
						action="#{InvoiceHeaderBean.print}"
						rendered="#{InvoiceHeaderBean.headerSaved}" />
					<h:commandButton value="Print Bill" styleClass="searchButton"
						action="#{InvoiceHeaderBean.printBill}"
						rendered="#{InvoiceHeaderBean.headerSaved}" />
					<h:commandButton value="Back" styleClass="searchButton"
						immediate="true" action="#{InvoiceHeaderBean.reset}">
					</h:commandButton>
				</h:panelGrid>


				<a4j:outputPanel ajaxRendered="true" id="SearchTable">
					<h:outputText value="There are no items with the search criteria."
						rendered="#{InvoiceHeaderBean.invLineItemList.size()== 0}" />
					<rich:dataTable value="#{InvoiceHeaderBean.invLineItemList}"
						var="ilist" id="table" rows="20"
						rendered="#{InvoiceHeaderBean.invLineItemList.size()!= 0 || InvoiceHeaderBean.invLineItemList == null}"
						styleClass="searchResultsTable">
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Part ID" />
							</f:facet>
							<h:outputText value="#{ilist.partId}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Package Desc" />
							</f:facet>
							<h:outputText value="#{ilist.pkgDesc}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Quantity Nos." />
							</f:facet>
							<h:outputText value="#{ilist.quantityNo}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Quantity Kgs." />
							</f:facet>
							<h:outputText value="#{ilist.quantityKgs}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Unit" />
							</f:facet>
							<h:outputText value="#{ilist.unit}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Rate" />
							</f:facet>
							<h:outputText value="#{ilist.rate}" />
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:outputText value="Amount" />
							</f:facet>
							<h:outputText value="#{ilist.amount}" />
						</rich:column>
						<rich:column>
							<h:commandButton value="Delete"
								action="#{InvoiceHeaderBean.deleteLineItem}">
								<f:setPropertyActionListener
									target="#{InvoiceHeaderBean.invLineItem}" value="#{ilist}" />
							</h:commandButton>
						</rich:column>
					</rich:dataTable>
				</a4j:outputPanel>


			</h:form>
		</f:view>

	</ui:define>
</ui:composition>